name: Load Test

on:
  workflow_dispatch:

jobs:
  run_load_test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: [10, 12, 14]

    steps:
      - name: Trigger Workflow
        run: |
          combination="${{ matrix.version }}"
          echo $combination
          octokit=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
          echo $octokit
          owner=$(echo -n "${{ github.repository_owner }}" | jq -r '@uri')
          echo $owner
          repo=$(echo -n "${{ github.event.repository.name }}" | jq -r '@uri')
          echo $repo
          # workflow_id=$(curl -s -X GET \
          #     -H "Authorization: token $octokit" \
          #     "https://api.github.com/repos/$owner/$repo/actions/workflows/load_file.yml" | \
          #     jq -r '.workflows[0].id')

          # echo "testing"
          # echo $workflow_id
              
          # curl -X POST \
          #     -H "Authorization: token $octokit" \
          #     -H "Accept: application/vnd.github.v3+json" \
          #     -d "{\"ref\": \"master\", \"inputs\": {\"input1\": \"$input1\", \"input2\": \"$input2\"}}" \
          #     "https://api.github.com/repos/$owner/$repo/actions/workflows/$workflow_id/dispatches"
